(()=>{var e={};e.id=744,e.ids=[744],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},94548:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>o}),t(50721),t(68739),t(35866);var a=t(23191),i=t(88716),r=t(37922),n=t.n(r),l=t(95231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o=["",{children:["event",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,50721)),"E:\\Proyectos\\Amigo Secreto\\app\\event\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,68739)),"E:\\Proyectos\\Amigo Secreto\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["E:\\Proyectos\\Amigo Secreto\\app\\event\\[id]\\page.tsx"],m="/event/[id]/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/event/[id]/page",pathname:"/event/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},60335:(e,s,t)=>{Promise.resolve().then(t.bind(t,42100))},46768:(e,s,t)=>{Promise.resolve().then(t.bind(t,41713))},72763:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},42100:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(10326),i=t(17577),r=t(35047);function n(){(0,r.useParams)().id;let[e,s]=(0,i.useState)(null),[t,n]=(0,i.useState)(!0),[l,c]=(0,i.useState)(null),[o,d]=(0,i.useState)(!1),[m,u]=(0,i.useState)(""),[p,h]=(0,i.useState)({}),[x,v]=(0,i.useState)(new Set),[j,g]=(0,i.useState)(null),b=(e,s="info")=>{g({message:e,type:s,show:!0}),setTimeout(()=>{g(null)},5e3)},N=async s=>{if(!x.has(s)&&!o){c(s);try{if(e){let t=await fetch(`/api/public/events/${e._id}/assignments`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({participantName:s})});if(t.ok){let e=await t.json();u(e.assignment.receiver),d(!0);let a=new Set(x);a.add(s),v(a)}else{let e=await t.json();console.error("Error generating assignment:",e),"No hay participantes disponibles para asignar"===e.error?b("\uD83C\uDF84 \xa1Felicitaciones! Ya todos los participantes han descubierto sus amigos secretos. El intercambio puede comenzar. \uD83C\uDF81","success"):"Participante ya revelado"===e.error?b("Ya has descubierto tu amigo secreto anteriormente.","info"):b("Error al generar la asignaci\xf3n. Int\xe9ntalo de nuevo.","error")}}}catch(e){console.error("Error generating assignment:",e),alert("Error al generar la asignaci\xf3n. Int\xe9ntalo de nuevo.")}}};return t?a.jsx("div",{className:"container py-5",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Cargando..."})}),a.jsx("p",{className:"mt-3",children:"Cargando evento..."})]})}):e?(0,a.jsxs)("div",{className:"container py-5",children:[(0,a.jsxs)("div",{className:"text-center mb-5",children:[(0,a.jsxs)("h1",{className:"display-title mb-3",children:["\uD83C\uDF81 ",e.name]}),a.jsx("p",{className:"text-muted mb-4",children:e.description}),a.jsx("div",{className:"mb-4",children:(0,a.jsxs)("small",{className:"text-muted",children:["\uD83D\uDC65 ",e.participants.length," participantes"]})})]}),(0,a.jsxs)("div",{className:"main-card mx-auto p-4",children:[(0,a.jsxs)("div",{className:"text-center mb-4",children:[a.jsx("h3",{className:"mb-3",children:"\uD83C\uDF81 Selecciona tu nombre \uD83C\uDF81"}),a.jsx("p",{className:"text-muted",children:"Haz clic en tu nombre para descubrir a qui\xe9n debes regalar"}),a.jsx("div",{className:"christmas-decoration"})]}),(0,a.jsxs)("div",{className:"participants-modal-container",children:[(0,a.jsxs)("div",{className:"participants-modal-header",children:[a.jsx("div",{className:"modal-icon",children:"\uD83D\uDC65"}),a.jsx("h5",{className:"modal-title",children:"Lista de Participantes"}),a.jsx("div",{className:"modal-subtitle",children:"Elige tu nombre de la lista"})]}),a.jsx("div",{className:"participants-modal-body",children:a.jsx("div",{className:"participants-grid",children:e.participants.map((e,s)=>{let t=x.has(e.name);return(0,a.jsxs)("button",{className:`participant-button ${t?"revealed":"available"}`,onClick:()=>N(e.name),disabled:t,style:{animationDelay:`${.1*s}s`},children:[(0,a.jsxs)("div",{className:"participant-content",children:[a.jsx("div",{className:"participant-name",children:e.name}),a.jsx("div",{className:"participant-status",children:t?(0,a.jsxs)("div",{className:"status-revealed",children:[a.jsx("span",{className:"status-icon",children:"✅"}),a.jsx("span",{className:"status-text",children:"Revelado"})]}):(0,a.jsxs)("div",{className:"status-available",children:[a.jsx("span",{className:"status-icon",children:"\uD83D\uDC46"}),a.jsx("span",{className:"status-text",children:"Haz clic"})]})})]}),!t&&a.jsx("div",{className:"button-glow"})]},e._id)})})})]}),(0,a.jsxs)("div",{className:"text-center mt-4",children:[a.jsx("div",{className:"mb-2",children:(0,a.jsxs)("small",{className:"text-muted",children:[x.size," de ",e.participants.length," participantes han descubierto su amigo secreto"]})}),x.size===e.participants.length?a.jsx("div",{className:"alert alert-success py-2",children:a.jsx("small",{children:"\uD83C\uDF84 \xa1Felicitaciones! Todos los participantes han descubierto sus amigos secretos. \xa1El intercambio puede comenzar! \uD83C\uDF81"})}):a.jsx("div",{className:"progress",style:{height:"6px"},children:a.jsx("div",{className:"progress-bar bg-success",style:{width:`${x.size/e.participants.length*100}%`}})})]})]}),o&&a.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.8)",zIndex:1060},children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsx("div",{className:"modal-content party-modal",children:(0,a.jsxs)("div",{className:"modal-body text-center p-5",children:[a.jsx("div",{className:"mb-4",children:a.jsx("span",{style:{fontSize:"3rem"},children:"\uD83C\uDF89"})}),a.jsx("h4",{className:"mb-3",children:"\xa1Felicitaciones!"}),(0,a.jsxs)("div",{id:"secretAssignedText",children:[l,", ",a.jsx("br",{}),"tu Amigo Secreto es:",a.jsx("br",{}),a.jsx("strong",{style:{fontSize:"1.6rem",color:"#ff6b6b"},children:m})]}),a.jsx("button",{className:"btn btn-gradient mt-4 px-4 py-2",onClick:()=>{d(!1),c(null),u("")},style:{zIndex:1061},children:"\xa1Entendido!"})]})})})}),j&&j.show&&(0,a.jsxs)("div",{className:"toast show position-fixed",style:{top:"20px",right:"20px",zIndex:1070,minWidth:"300px"},role:"alert","aria-live":"assertive","aria-atomic":"true",children:[(0,a.jsxs)("div",{className:`toast-header bg-${"success"===j.type?"success":"error"===j.type?"danger":"info"} text-white`,children:[(0,a.jsxs)("strong",{className:"me-auto",children:["success"===j.type&&"\uD83C\uDF84 \xa1Felicitaciones!","error"===j.type&&"❌ Error","info"===j.type&&"ℹ️ Informaci\xf3n"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>{g(null)},"aria-label":"Close"})]}),a.jsx("div",{className:"toast-body",children:j.message})]})]}):a.jsx("div",{className:"container py-5",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"mb-4",children:a.jsx("span",{style:{fontSize:"4rem"},children:"\uD83C\uDF84"})}),a.jsx("h2",{children:"Evento no encontrado"}),a.jsx("p",{className:"text-muted",children:"El evento que buscas no existe o ha sido eliminado"})]})})}},41713:(e,s,t)=>{"use strict";t.d(s,{default:()=>r});var a=t(10326),i=t(77109);function r({children:e}){return a.jsx(i.SessionProvider,{children:e})}},35047:(e,s,t)=>{"use strict";var a=t(77389);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},50721:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`E:\Proyectos\Amigo Secreto\app\event\[id]\page.tsx#default`)},68739:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c,metadata:()=>l});var a=t(19510),i=t(77366),r=t.n(i);t(67272);let n=(0,t(68570).createProxy)(String.raw`E:\Proyectos\Amigo Secreto\components\SessionProvider.tsx#default`),l={title:"Amigo Secreto",description:"Selecciona tu nombre y descubre a qui\xe9n debes regalar"};function c({children:e}){return(0,a.jsxs)("html",{lang:"es",children:[(0,a.jsxs)("head",{children:[a.jsx("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css",rel:"stylesheet"}),a.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap",rel:"stylesheet"}),a.jsx("link",{rel:"icon",href:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 36 36'%3E%3Ctext y='32' font-size='32'%3E%F0%9F%8E%81%3C/text%3E%3C/svg%3E"})]}),(0,a.jsxs)("body",{className:r().className,children:[a.jsx(n,{children:e}),a.jsx("script",{src:"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"})]})]})}},67272:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,571],()=>t(94548));module.exports=a})();