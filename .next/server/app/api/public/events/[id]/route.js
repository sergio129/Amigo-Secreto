"use strict";(()=>{var e={};e.id=639,e.ids=[639],e.modules={38013:e=>{e.exports=require("mongodb")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},16918:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>x,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>v});var i={};r.r(i),r.d(i,{GET:()=>u});var n=r(49303),o=r(88716),s=r(60670),a=r(87070),d=r(38013),p=r(2021);async function u(e,{params:t}){try{let e=t.id;if(!e)return a.NextResponse.json({error:"ID de evento requerido"},{status:400});let r=(await p.Z).db("SaludDirecta"),i=await r.collection("amigo_secreto_events").findOne({_id:new d.ObjectId(e)});if(!i)return a.NextResponse.json({error:"Evento no encontrado"},{status:404});if(!i.isActive)return a.NextResponse.json({error:"Este evento no est\xe1 disponible"},{status:404});let n=await r.collection("participants").find({eventId:i._id.toString()}).toArray();return a.NextResponse.json({_id:i._id.toString(),name:i.name,description:i.description,date:i.date,isActive:i.isActive,participants:n.map(e=>({_id:e._id.toString(),name:e.name,email:e.email,isRevealed:e.isRevealed||!1,revealedAt:e.revealedAt}))})}catch(e){return console.error("Error fetching event:",e),a.NextResponse.json({error:"Error interno del servidor"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/public/events/[id]/route",pathname:"/api/public/events/[id]",filename:"route",bundlePath:"app/api/public/events/[id]/route"},resolvedPagePath:"E:\\Proyectos\\Amigo Secreto\\app\\api\\public\\events\\[id]\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:l,staticGenerationAsyncStorage:v,serverHooks:m}=c,g="/api/public/events/[id]/route";function x(){return(0,s.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:v})}},2021:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(38013);if(!process.env.MONGODB_URI)throw Error('Invalid/Missing environment variable: "MONGODB_URI"');let n=process.env.MONGODB_URI,o=new i.MongoClient(n,{}).connect()}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[276,972],()=>r(16918));module.exports=i})();