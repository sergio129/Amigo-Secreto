"use strict";(()=>{var e={};e.id=639,e.ids=[639],e.modules={8013:e=>{e.exports=require("mongodb")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6918:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>x,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>v});var i={};r.r(i),r.d(i,{GET:()=>c});var n=r(9303),o=r(8716),a=r(670),s=r(7070),d=r(8013),p=r(2021);async function c(e,{params:t}){try{let e=t.id;if(!e)return s.NextResponse.json({error:"ID de evento requerido"},{status:400});let r=(await p.Z).db("SaludDirecta"),i=await r.collection("amigo_secreto_events").findOne({_id:new d.ObjectId(e)});if(!i)return s.NextResponse.json({error:"Evento no encontrado"},{status:404});let n=await r.collection("participants").find({eventId:i._id.toString()}).toArray();return s.NextResponse.json({_id:i._id.toString(),name:i.name,description:i.description,date:i.date,isActive:i.isActive,participants:n.map(e=>({_id:e._id.toString(),name:e.name,email:e.email,isRevealed:e.isRevealed||!1,revealedAt:e.revealedAt}))})}catch(e){return console.error("Error fetching event:",e),s.NextResponse.json({error:"Error interno del servidor"},{status:500})}}let u=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/public/events/[id]/route",pathname:"/api/public/events/[id]",filename:"route",bundlePath:"app/api/public/events/[id]/route"},resolvedPagePath:"E:\\Proyectos\\Amigo Secreto\\app\\api\\public\\events\\[id]\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:l,staticGenerationAsyncStorage:v,serverHooks:m}=u,g="/api/public/events/[id]/route";function x(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:v})}},2021:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(8013);if(!process.env.MONGODB_URI)throw Error('Invalid/Missing environment variable: "MONGODB_URI"');let n=process.env.MONGODB_URI,o=new i.MongoClient(n,{}).connect()}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[276,972],()=>r(6918));module.exports=i})();